var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){"use strict";var e=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{interactive:!1};_classCallCheck(this,i),this.front=e,this.faces=t.faces||{},this.width=t.width||this.getDefaultWidth(),this.parent=this.front.parentNode,this.bgColor=this.getBackgroundColor(),this.commonStyle={width:this.width+"px",height:this.width+"px"},this.sceneStyle={perspective:4*this.width+"px"},this.faceStyle={position:"absolute",top:0,left:0},this.cubeStyle={transform:"translateZ(-"+this.width/2+"px)","transform-style":"preserve-3d"},this.interactive=t.interactive,this.renderCube(),t.interactive&&(this.angleX=0,this.angleY=0,this.setUpListeners())}return _createClass(i,[{key:"getBackgroundColor",value:function(){return window.getComputedStyle(this.front,null).getPropertyValue("background-color")}},{key:"getDefaultWidth",value:function(){var t=[],e=function(e){e&&t.push(e.offsetWidth,e.offsetHeight)};return e(this.front),e(this.faces.back),e(this.faces.right),e(this.faces.top),e(this.faces.bottom),e(this.faces.left),Math.max.apply(Math,t)}},{key:"generateDOM",value:function(e,t,i){var n=i||document.createElement("div");if(n.classList.add(t),"string"==typeof e)return this.setStyle(n,e),n;var s=Object.assign({},this.commonStyle,e),a=Object.keys(s).map(function(e){return e+": "+s[e]+";"}).join(" ");return this.setStyle(n,a),n}},{key:"setFaceStyle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"X",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return e.style.transform="rotate"+t+"("+i+"deg) translateZ("+this.width/2+"px)"}},{key:"setStyle",value:function(e,t){return e.setAttribute("style",t)}},{key:"composeCube",value:function(){var e=this.generateDOM(this.sceneStyle,"cubify__scene"),t=this.generateDOM(this.cubeStyle,"cubify__cube"),i=this.generateDOM(this.faceStyle,"cubify__face",this.front),n=this.faces.back?this.generateDOM(this.faceStyle,"cubify__face",this.faces.back):this.generateDOM(this.faceStyle,"cubify__face"),s=this.faces.top?this.generateDOM(this.faceStyle,"cubify__face",this.faces.top):this.generateDOM(this.faceStyle,"cubify__face"),a=this.faces.bottom?this.generateDOM(this.faceStyle,"cubify__face",this.faces.bottom):this.generateDOM(this.faceStyle,"cubify__face"),r=this.faces.right?this.generateDOM(this.faceStyle,"cubify__face",this.faces.right):this.generateDOM(this.faceStyle,"cubify__face"),c=this.faces.left?this.generateDOM(this.faceStyle,"cubify__face",this.faces.left):this.generateDOM(this.faceStyle,"cubify__face");return this.setFaceStyle(i,"Y",0),this.setFaceStyle(n,"Y",180),this.setFaceStyle(s,"X",90),this.setFaceStyle(a,"X",-90),this.setFaceStyle(r,"Y",90),this.setFaceStyle(c,"Y",-90),t.append(i,n,s,a,c,r),e.append(t),this.cube=t,e}},{key:"renderCube",value:function(){this.parent.append(this.composeCube())}},{key:"rotateCube",value:function(e,t,i){var n=void 0,s=void 0;s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(n=t-e.touches[0].clientX,i-e.touches[0].clientY):(n=t-e.clientX,i-e.clientY);var a=this.angleX-n/2,r=this.angleY+s/2;return this.cube.style.transform="translateZ(-"+this.width/2+"px) rotateY("+a+"deg) rotateX("+r+"deg)",[a,r]}},{key:"setAngles",value:function(e,t){this.angleX=e,this.angleY=t}},{key:"setUpListeners",value:function(){var a=this;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?this.cube.addEventListener("touchstart",function(e){e.preventDefault();var t=e.touches[0].clientX,i=e.touches[0].clientY,n=void 0,s=function(e){return n=a.rotateCube(e,t,i),a.rotateCube(e,t,i)};document.addEventListener("touchmove",s),document.addEventListener("touchend",function e(){a.setAngles.apply(a,_toConsumableArray(n)),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",e)})}):this.cube.addEventListener("mousedown",function(e){e.preventDefault();var t=e.clientX,i=e.clientY,n=void 0,s=function(e){return n=a.rotateCube(e,t,i),a.rotateCube(e,t,i)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",function e(){a.setAngles.apply(a,_toConsumableArray(n)),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e)})})}}]),i}();window.Cubify=e}();