"use strict";function _instanceof(a,b){return null!=b&&"undefined"!=typeof Symbol&&b[Symbol.hasInstance]?b[Symbol.hasInstance](a):a instanceof b}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function _classCallCheck(a,b){if(!_instanceof(a,b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(function(){var a=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,d=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,a),this.front=b,this.width=this.front.offsetWidth||c,this.parent=this.front.parentNode,this.bgColor=this.getBackgroundColor(),this.commonStyle={width:"".concat(this.width,"px"),height:"".concat(this.width,"px")},this.sceneStyle={perspective:"".concat(this.width,"px")},this.faceStyle={position:"absolute",top:0,left:0,"background-color":this.bgColor},this.cubeStyle={transform:"translateZ(-".concat(this.width/2,"px)"),"transform-style":"preserve-3d"},this.interactive=d,d&&(this.angleX=0,this.angleY=0),this.renderCube(),this.setUpListeners()}return _createClass(a,[{key:"getBackgroundColor",value:function(){return window.getComputedStyle(this.front,null).getPropertyValue("background-color")}},{key:"generateDOM",value:function(a,b){var c=document.createElement("div");if(c.classList.add(b),"string"==typeof a)return this.setStyle(c,a),c;var d=Object.assign({},this.commonStyle,a),e=Object.keys(d),f=e.map(function(a){return"".concat(a,": ").concat(d[a],";")}).join(" ");return this.setStyle(c,f),c}},{key:"setFaceStyle",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"X",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return a.style.transform="rotate".concat(b,"(").concat(c,"deg) translateZ(").concat(this.width/2,"px)")}},{key:"setStyle",value:function(a,b){return a.setAttribute("style",b)}},{key:"composeCube",value:function(){var a=this.generateDOM(this.sceneStyle,"cubify__scene"),b=this.generateDOM(this.cubeStyle,"cubify__cube"),c=this.front;this.front.remove(),this.setFaceStyle(c,"Y",0);var d=this.generateDOM(this.faceStyle,"cubify__face"),e=this.generateDOM(this.faceStyle,"cubify__face"),f=this.generateDOM(this.faceStyle,"cubify__face"),g=this.generateDOM(this.faceStyle,"cubify__face"),h=this.generateDOM(this.faceStyle,"cubify__face");return this.setFaceStyle(c,"Y",0),this.setFaceStyle(d,"Y",180),this.setFaceStyle(e,"X",-90),this.setFaceStyle(f,"X",90),this.setFaceStyle(g,"Y",90),this.setFaceStyle(h,"Y",-90),b.append(c,d,e,f,g,h),a.append(b),this.cube=b,a}},{key:"renderCube",value:function(){this.parent.append(this.composeCube())}},{key:"rotateCube",value:function(a,b,c){var d=this.calculateDelta(b,a.clientX),e=this.calculateDelta(c,a.clientY),f=this.angleX-d/2,g=this.angleY+e/2;return this.cube.style.transform="translateZ(-".concat(this.width/2,"px) rotateY(").concat(f,"deg) rotateX(").concat(g,"deg)"),[f,g]}},{key:"calculateDelta",value:function(a,b){return a-b}},{key:"setAngles",value:function(a,b){this.angleX=a,this.angleY=b}},{key:"removeListener",value:function(a,b,c){a.removeEventListener(b,c)}},{key:"setUpListeners",value:function(){var a=this;this.cube.addEventListener("mousedown",function(b){b.preventDefault();var c,d=b.clientX,e=b.clientY,f=function(b){return c=a.rotateCube(b,d,e),a.rotateCube(b,d,e)};f(b,d,e);var g=function b(){a.setAngles.apply(a,_toConsumableArray(c)),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",g)})}}]),a}();window.Cubify=a})();