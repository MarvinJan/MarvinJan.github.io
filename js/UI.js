var _createClass=function(){function r(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}}();function _toConsumableArray(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){"use strict";function i(e){return new Promise(function(n,t){setTimeout(n,e)})}function c(n,t,e,r){return r<t?(n(),i(e/(t+1)).then(function(){return c(n,t,e,r+1)})):new Promise(function(n,t){return n()})}var n=function(){function r(n,t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,r),this.parent="string"==typeof n?document.querySelector(n):n,this.strings=t,this.timestep=e.timestep||150,this.delay=e.delay||3e3,this.current_iteration=0,this.cycle=e.cycle||!1}return _createClass(r,[{key:"init",value:function(){var n=this;this.appendString(this.strings[this.current_iteration]),setTimeout(function(){n.nextString(n.current_iteration,n.strings)},this.delay)}},{key:"appendString",value:function(n){this.parent.innerHTML="",this.parent.append(n)}},{key:"nextString",value:function(e,r){var i=this;this.is_running=!0;for(var a=r[e%r.length],o=r[(e+1)%r.length],s=a.length>o.length?a.length:o.length,n=function(t){setTimeout(function(){var n=i.switchChar(t,a,o);c(function(){i.activeString=i.randomize(n,t,"&*#$^")},3,i.timestep,0).then(function(){return i.activeString=n}),t+1===s&&!0===i.cycle&&setTimeout(function(){i.nextString(e+1,r)},i.timestep+i.delay||0)},t*i.timestep)},t=0;t<s;t++)n(t)}},{key:"randomize",value:function(n,t,e){var r=Math.floor(Math.random()*(e.length-1));return n.slice(0,t)+e[r]+n.slice(t+1)}},{key:"switchChar",value:function(n,t,e){return e.slice(0,n+1)+t.slice(n+1)}},{key:"activeString",set:function(n){this.appendString(n)}}]),r}(),t=function(){function r(n,t,e){_classCallCheck(this,r),this.parent=document.querySelector(n),this.string=t,this.animation_duration=e,this.current_string=""}return _createClass(r,[{key:"init",value:function(){var n=this,t=this.string.length,e=0;c(function(){n.current_string=n.string.slice(0,e+1),e++},t,1e3*this.animation_duration,0).then(function(){i(1e3).then(function(){return n.setAnimated(".stringPrint")})})}},{key:"generateSpan",value:function(n,t){var e=document.createElement("span");return t&&e.classList.add(t),e.append(n),e}},{key:"setAnimated",value:function(n){this.parent.querySelector(n).classList.add("animated")}},{key:"current_string",set:function(n){this.parent.innerHTML="",this.parent.append(this.generateSpan(n,"stringPrint"))}}]),r}(),e=function(){function o(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{position:null,repeat:null,animate:{},block_params:{}};_classCallCheck(this,o);var e=t.position||"beforeEnd",r=document.querySelector(n),i=t.animate,a=this.formBlock(t.block_params);a.querySelector("img")?this.images_are_loaded(a).then(function(){return r.insertAdjacentElement(e,a)}):r.insertAdjacentElement(e,a),this.animation(a,i.animation,i.time)}return _createClass(o,[{key:"formBlock",value:function(n){var t,e=this,r=n.tag||"div",i=n.classes||null,a=n.innerHTML||null,o=n.children||null,s=document.createElement(r);(a&&"string"==typeof a&&a&&(s.innerHTML=a),i)&&(Array.isArray(i)?(t=s.classList).add.apply(t,_toConsumableArray(i)):console.log("%c Error: block_params.classes must be an array","color: #a00"));return o&&Array.isArray(o)?o.forEach(function(n){s.insertAdjacentElement(n.position||"beforeEnd",e.formBlock(n))}):o&&!Array.isArray(o)&&console.log("%c Error: block_params.children must be an array","color: #b00; font-weight: bold"),s}},{key:"images_are_loaded",value:function(n){return new Promise(function(t,e){var r=n.querySelectorAll("img"),i=[];r.forEach(function(n){n.onload=function(){return i.push(!0),i.length===r.length?t("done"):e("reject")}})})}}]),o}();window.StringSwap=n.bind(n),window.StringPrint=t.bind(t),window.InsertBlock=e.bind(e)}();