var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){"use strict";function s(n){return new Promise(function(e,t){setTimeout(e,n)})}function o(e,t,n,i){return i<t?(e(i),s(n/(t+1)).then(function(){return o(e,t,n,i+1)})):new Promise(function(e,t){return e()})}document.addEventListener("DOMContentLoaded",function(){var e=new t(".header__content-specialisation","Frontend Development",2);e.init().then(function(){e.element.addEventListener("animationend",function(){var e=document.querySelector(".header__content-skills");e.classList.add("animated");new n(".header__content-skills span",["JavaScript","Angular7","HTML5","CSS3","ReactJS","Electron","Ionic4"],{cycle:!0})})}),document.querySelectorAll(".skills__technology").forEach(function(e,t){var n=new i(e);s(250*t).then(function(){return n.cube.classList.add("animated")})}),document.querySelectorAll(".button.button_width-7").forEach(function(e){var t=new n(e,["details","close"],{timestep:20});e.addEventListener("click",function(){t.nextString()})})});var n=function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,i),this.parent="string"==typeof e?document.querySelector(e):e,this.strings=t,this.timestep=n.timestep||150,this.delay=n.delay||3e3,this.current_iteration=0,this.cycle=n.cycle||!1,this.is_running=!1,this.element,!0===this.cycle&&this.init()}return _createClass(i,[{key:"init",value:function(){var e=this;this.activeString=this.strings[this.current_iteration],setTimeout(function(){e.nextString()},this.delay)}},{key:"appendString",value:function(e){this.parent.innerHTML="",this.parent.append(e)}},{key:"nextString",value:function(){var n=this;if(!0===this.is_running)return!1;this.is_running=!0;var e=this.current_iteration,t=this.strings,i=t[e%t.length],r=t[(e+1)%t.length],a=i.length>r.length?i.length:r.length;o(function(e){var t=n.switchChar(e,i,r);o(function(){n.activeString=n.randomize(t,e,"&*#$^")},3,n.timestep,0).then(function(){return n.activeString=t})},a,this.timestep*a,0).then(function(){n.is_running=!1,n.current_iteration++,!0===n.cycle&&s(n.timestep+n.delay||0).then(function(){n.nextString()})})}},{key:"randomize",value:function(e,t,n){var i=Math.floor(Math.random()*(n.length-1));return e.slice(0,t)+n[i]+e.slice(t+1)}},{key:"switchChar",value:function(e,t,n){return n.slice(0,e+1)+t.slice(e+1)}},{key:"checkRunning",value:function(){return this.is_running}},{key:"activeString",set:function(e){this.appendString(e)}}]),i}(),t=function(){function i(e,t,n){_classCallCheck(this,i),this.parent=document.querySelector(e),this.string=t,this.animation_duration=n}return _createClass(i,[{key:"init",value:function(){var e=this,t=this.string.length,n=0;return o(function(){e.current_string=e.string.slice(0,n+1),n++},t,1e3*this.animation_duration,0).then(function(){s(1e3).then(function(){return e.setAnimated(".stringPrint")})})}},{key:"generateSpan",value:function(e,t){var n=document.createElement("span");return t&&n.classList.add(t),n.append(e),this.element=n}},{key:"setAnimated",value:function(e){this.parent.querySelector(e).classList.add("animated")}},{key:"current_string",set:function(e){this.parent.innerHTML="",this.parent.append(this.generateSpan(e,"stringPrint"))}}]),i}(),i=(function(){function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{position:null,repeat:null,block_params:{}};_classCallCheck(this,s);var n=t.position||"beforeEnd",i=document.querySelector(e),r=t.animate,a=this.formBlock(t.block_params);a.querySelector("img")?this.images_are_loaded(a).then(function(){return i.insertAdjacentElement(n,a)}):i.insertAdjacentElement(n,a),this.animation(a,r.animation,r.time)}_createClass(s,[{key:"formBlock",value:function(e){var t,n=this,i=e.tag||"div",r=e.classes||null,a=e.innerHTML||null,s=e.children||null,o=document.createElement(i);(a&&"string"==typeof a&&a&&(o.innerHTML=a),r)&&(Array.isArray(r)?(t=o.classList).add.apply(t,_toConsumableArray(r)):console.log("%c Error: block_params.classes must be an array","color: #a00"));return s&&Array.isArray(s)?s.forEach(function(e){o.insertAdjacentElement(e.position||"beforeEnd",n.formBlock(e))}):s&&!Array.isArray(s)&&console.log("%c Error: block_params.children must be an array","color: #b00; font-weight: bold"),o}},{key:"images_are_loaded",value:function(e){return new Promise(function(t,n){var i=e.querySelectorAll("img"),r=[];i.forEach(function(e){e.onload=function(){return r.push(!0),r.length===i.length?t("done"):n("reject")}})})}}])}(),function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,i),this.front=e,this.width=this.front.offsetWidth||t,this.parent=this.front.parentNode,this.bgColor=this.getBackgroundColor(),this.commonStyle={width:this.width+"px",height:this.width+"px"},this.sceneStyle={perspective:this.width+"px"},this.faceStyle={position:"absolute",top:0,left:0,"background-color":this.bgColor},this.cubeStyle={transform:"translateZ(-"+this.width/2+"px)","transform-style":"preserve-3d"},(this.interactive=n)&&(this.angleX=0,this.angleY=0),this.renderCube(),this.setUpListeners()}return _createClass(i,[{key:"getBackgroundColor",value:function(){return window.getComputedStyle(this.front,null).getPropertyValue("background-color")}},{key:"generateDOM",value:function(e,t,n){var i=n||document.createElement("div");if(i.classList.add(t),"string"==typeof e)return this.setStyle(i,e),i;var r=Object.assign({},this.commonStyle,e),a=Object.keys(r).map(function(e){return e+": "+r[e]+";"}).join(" ");return this.setStyle(i,a),i}},{key:"setFaceStyle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"X",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return e.style.transform="rotate"+t+"("+n+"deg) translateZ("+this.width/2+"px)"}},{key:"setStyle",value:function(e,t){return e.setAttribute("style",t)}},{key:"composeCube",value:function(){var e=this.generateDOM(this.sceneStyle,"cubify__scene"),t=this.generateDOM(this.cubeStyle,"cubify__cube"),n=this.generateDOM(this.faceStyle,"cubify__face",this.front);this.front.remove();var i=this.generateDOM(this.faceStyle,"cubify__face"),r=this.generateDOM(this.faceStyle,"cubify__face"),a=this.generateDOM(this.faceStyle,"cubify__face"),s=this.generateDOM(this.faceStyle,"cubify__face"),o=this.generateDOM(this.faceStyle,"cubify__face");return this.setFaceStyle(n,"Y",0),this.setFaceStyle(i,"Y",180),this.setFaceStyle(r,"X",-90),this.setFaceStyle(a,"X",90),this.setFaceStyle(s,"Y",90),this.setFaceStyle(o,"Y",-90),t.append(n,i,r,a,s,o),e.append(t),this.cube=t,e}},{key:"renderCube",value:function(){this.parent.append(this.composeCube())}},{key:"rotateCube",value:function(e,t,n){var i=this.calculateDelta(t,e.clientX),r=this.calculateDelta(n,e.clientY),a=this.angleX-i/2,s=this.angleY+r/2;return this.cube.style.transform="translateZ(-"+this.width/2+"px) rotateY("+a+"deg) rotateX("+s+"deg)",[a,s]}},{key:"calculateDelta",value:function(e,t){return e-t}},{key:"setAngles",value:function(e,t){this.angleX=e,this.angleY=t}},{key:"removeListener",value:function(e,t,n){e.removeEventListener(t,n)}},{key:"setUpListeners",value:function(){var a=this;this.cube.addEventListener("mousedown",function(e){e.preventDefault();var t=e.clientX,n=e.clientY,i=void 0,r=function(e){return i=a.rotateCube(e,t,n),a.rotateCube(e,t,n)};r(e);document.addEventListener("mousemove",r),document.addEventListener("mouseup",function e(){a.setAngles.apply(a,_toConsumableArray(i)),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)})})}}]),i}())}();